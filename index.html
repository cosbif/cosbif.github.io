<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Осветители и оптика NOM</title>
  <style>
    /* Устанавливаем нулевые отступы и  базовые стили */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      background: #f8f8f8;
      font-family: 'Inter', sans-serif;
      display: flex;
      justify-content: center;  /* центрируем контейнер по горизонтали */
      padding: 20px 0;
    }

    /* 
      Главный контейнер, которому даём фиксированную ширину 375px,
      чтобы повторить макет под iPhone 13 mini.
      Высоту (812px) можно оставить auto,
      чтобы контент подстраивался, если что-то растянется.
    */
    .screen {
      position: relative;
      width: 375px;
      min-height: 812px; /* можно задать или оставить auto */
      background: #FFFFFF;
      overflow: hidden; /* если что-то вылезет за пределы */
    }

    /********************************************************************
      Ниже — CSS, скопированный из Figma (с комментариями).
      Я сгруппировал, где это возможно, но многое остаётся “absolute”.
     ********************************************************************/

    /* iPhone 13 mini - 1 */
    /* position: relative;  width: 375px;  height: 812px; */
    /* уже задано выше .screen */

    .logo-wrapper {
      display: flex;
      justify-content: center;
      margin-top: 30px;
    }
    
    .logo-img {
      width: 120px; /* подберите подходящий размер */
      height: auto;
    }

    /* Заголовок: Осветители и оптика NOM */
    .main-title {
      position: absolute;
      width: 224px;
      height: 70px;
      left: calc(50% - 224px/2 + 0.5px);
      top: 180px;
      font-weight: 600;
      font-size: 32px;
      line-height: 110%;
      text-align: center;
      color: #525252;
    }

    /* "Модель" */
    .label-model {
      position: absolute;
      width: 61px;
      height: 18px;
      left: calc(50% - 61px/2);
      top: 282px;
      font-weight: 400;
      font-size: 16px;
      line-height: 110%;
      letter-spacing: -0.01em;
      color: #A0A0A0; /* grey */
    }
    /* "NOM 1 Pro" */
    #modelValue {
      position: absolute;
      width: 99px;
      height: 22px;
      left: calc(50% - 99px/2);
      top: 308px;
      font-weight: 700;
      font-size: 20px;
      line-height: 110%;
      letter-spacing: -0.01em;
      color: #525252; /* main */
      text-align: center;
    }

    /* Дата покупки */
    .label-date {
      position: absolute;
      width: 105px;
      height: 18px;
      left: calc(50% - 105px/2);
      top: 354px;
      font-weight: 400;
      font-size: 16px;
      line-height: 110%;
      color: #A0A0A0; /* grey */
      text-align: center;
    }
    /* "14 марта, 2022" */
    #productionDateValue {
      position: absolute;
      width: 147px;
      height: 22px;
      left: calc(50% - 147px/2);
      top: 380px;
      font-weight: 600;
      font-size: 20px;
      line-height: 110%;
      letter-spacing: -0.01em;
      color: #525252; /* main */
      text-align: center;
    }

    /* Даты слева/справа над прогресс-баром */
    #startDateShort {
      position: absolute;
      width: 56px;
      height: 15px;
      left: 17px; /* или right: 303px, но мы упростим */
      top: 426px;
      font-weight: 400;
      font-size: 14px;
      line-height: 110%;
      letter-spacing: -0.01em;
      color: #525252;
    }
    #endDateShort {
      position: absolute;
      width: 56px;
      height: 15px;
      right: 16px; /* */
      top: 426px;
      font-weight: 400;
      font-size: 14px;
      line-height: 110%;
      letter-spacing: -0.01em;
      color: #525252;
      text-align: right;
    }

    /* Прогресс-бар (Group 199 / Background) */
    .progress-background {
      position: absolute;
      width: 342px;
      height: 12px;
      left: calc(50% - 342px/2 + 0.5px);
      top: 449px;
      background: #E1E4EA;
      border-radius: 5px;
    }
    .progress-fill {
      /* Заливка, чтобы менять её ширину через JS */
      position: absolute;
      height: 12px;
      left: calc(50% - 342px/2 + 0.5px); /* те же координаты, что у фона */
      top: 449px;
      background: #525252;
      border-radius: 5px;
      width: 0; /* по умолчанию 0, потом заполним скриптом */
      transition: width 0.3s;
    }

    /* Осталось 100 дней гарантии */
    #daysRemaining {
      position: absolute;
      width: 194px;
      height: 15px;
      left: calc(50% - 194px/2 + 0.5px);
      top: 469px;
      font-weight: 400;
      font-size: 14px;
      line-height: 110%;
      letter-spacing: -0.01em;
      color: #A0A0A0;
      text-align: center;
    }

    /* Кнопка «Посмотреть последние продукты» (Link) */
    .latest-button {
      position: absolute;
      width: 343px;
      height: 50px;
      left: calc(50% - 343px/2);
      bottom: 48px;
      background: #525252;
      border-radius: 30px;

      display: flex;
      flex-direction: row;
      justify-content: center;
      align-items: center;
      gap: 10px;
      text-decoration: none; /* чтобы не было подчеркивания */
    }
    .latest-button-text {
      font-weight: 400;
      font-size: 16px;
      line-height: 110%;
      letter-spacing: -0.01em;
      color: #FFFFFF;
    }

    .contacts {
      display: flex;
      flex-wrap: wrap; /* чтобы иконки переносились, если их >4 */
      justify-content: center;
      gap: 20px;       /* расстояние между иконками */
      margin-top: 30px;
    }
    .contact-icon {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;  
      align-items: center;
      justify-content: center;
      color: #fff; /* цвет иконки (svg) */
      text-decoration: none;
    }
    .contact-icon svg {
      width: 24px;
      height: 24px;
    }

    /* Теперь покрасим фон каждой кнопки */
    .phone-icon {
      background: #4CAF50; /* зелёный */
    }
    .mail-icon {
      background: #2196F3; /* синий */
    }
    .whatsapp-icon {
      background: #20B038; /* WhatsApp зелёный */
    }
    .telegram-icon {
      background: #2AABEE; /* Telegram голубой */
    }
    .insta-icon {
      /* Градиент Инстаграма */
      background: radial-gradient(circle at 30% 107%, #fdf497 0%, #fdf497 5%, #fd5949 45%, #d6249f 60%, #285AEB 90%);
    }

  </style>
</head>
<body>
  <div class="screen">
    <!-- Пример: «логотип» из нескольких фигур -->
    <div class="logo-wrapper">
      <img src="logo.svg" alt="Логотип NOM" class="logo-img"/>
    </div>

    <!-- Заголовок -->
    <div class="main-title">Осветители и оптика NOM</div>

    <!-- Модель -->
    <div class="label-model">Модель</div>
    <div id="modelValue">NOM 1 Pro</div>

    <!-- Дата покупки -->
    <div class="label-date">Дата покупки</div>
    <div id="productionDateValue">14 марта, 2022</div>

    <!-- Даты над прогресс-баром -->
    <div id="startDateShort">14.03.25</div>
    <div id="endDateShort">14.03.27</div>

    <!-- Прогресс-бар -->
    <div class="progress-background"></div>
    <div class="progress-fill" id="progressFill"></div>

    <!-- Осталось XX дней гарантии -->
    <div id="daysRemaining">Осталось 100 дней гарантии</div>

    <div class="contacts">
      <!-- Телефон -->
      <a href="tel:+70000000000" class="contact-icon phone-icon" target="_blank">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="phone.svg"/></svg>
      </a>
      <!-- Почта -->
      <a href="mailto:info@company.ru" class="contact-icon mail-icon" target="_blank">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="..."/></svg>
      </a>
      <!-- WhatsApp -->
      <a href="https://wa.me/70000000000" class="contact-icon whatsapp-icon" target="_blank">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="..."/></svg>
      </a>
      <!-- Telegram -->
      <a href="https://t.me/YourManager" class="contact-icon telegram-icon" target="_blank">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="..."/></svg>
      </a>
      <!-- Instagram -->
      <a href="https://instagram.com/YourCompany" class="contact-icon insta-icon" target="_blank">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="..."/></svg>
      </a>
    </div>

    <!-- Кнопка «Посмотреть последние продукты» -->
    <a href="https://t.me/moscowmap"
       class="latest-button"
       target="_blank">
      <span class="latest-button-text">
        Посмотреть последние продукты
      </span>
    </a>
  </div>

  <script>
    /**
     * Парсим дату в формате DD.MM.YYYY => Date (JS)
     * Пример: "14.03.2023"
     */
    function parseDateDDMMYYYY(dateStr) {
      const [dd, mm, yyyy] = dateStr.split('.');
      // Если что-то не так, возвращаем today
      if (!dd || !mm || !yyyy) {
        return new Date();
      }
      return new Date(`${yyyy}-${mm}-${dd}T00:00:00`);
    }

    /**
    * Форматируем дату (Date -> "14 марта 2023")
     * Для красивого отображения на русском.
     */
     function formatDateRussian(dateObj) {
      const months = [
        'января','февраля','марта','апреля','мая','июня',
        'июля','августа','сентября','октября','ноября','декабря'
      ];
      const d = dateObj.getDate();
      const m = dateObj.getMonth();
      const y = dateObj.getFullYear();
      return `${d} ${months[m]}, ${y}`;
    }

    /**
     * Форматируем короткий вид: DD.MM.YY (последние две цифры года)
     */
    function formatShort(dateObj) {
      let d = dateObj.getDate();
      let m = dateObj.getMonth() + 1;
      let y = dateObj.getFullYear() % 100;
      if(d < 10) d = '0' + d;
      if(m < 10) m = '0' + m;
      if(y < 10) y = '0' + y;
      return `${d}.${m}.${y}`;
    }

    // Получаем параметры из URL
    const params = new URLSearchParams(window.location.search);
    const modelParam = params.get('model') || '—';  // "NOM 1 Pro"
    const dateParam = params.get('date');           // "DD.MM.YYYY"

    // Привязываемся к элементам на странице
    const modelValueEl = document.getElementById('modelValue');
    const productionDateEl = document.getElementById('productionDateValue');
    const startDateEl = document.getElementById('startDateShort');
    const endDateEl = document.getElementById('endDateShort');
    const daysRemainingEl = document.getElementById('daysRemaining');
    const progressFillEl = document.getElementById('progressFill');

    // Устанавливаем модель
    modelValueEl.textContent = modelParam;

    // Парсим дату производства
    let productionDate;
    if(dateParam) {
      productionDate = parseDateDDMMYYYY(dateParam);
    } else {
      productionDate = new Date(); // по умолчанию, если не указано
    }

    // Выводим дату производства (полным русским форматом)
    productionDateEl.textContent = formatDateRussian(productionDate);

    // Дата окончания гарантии (+2 года)
    const warrantyEnd = new Date(productionDate);
    warrantyEnd.setFullYear(warrantyEnd.getFullYear() + 2);

    // Короткие даты для прогресс-бара
    startDateEl.textContent = formatShort(productionDate);
    endDateEl.textContent = formatShort(warrantyEnd);

    // Считаем кол-во дней гарантии (2 года)
    const totalWarrantyMs = warrantyEnd.getTime() - productionDate.getTime();
    const totalWarrantyDays = Math.ceil(totalWarrantyMs / (1000*60*60*24));

    // Сколько прошло дней с даты покупки до сегодня
    const now = new Date();
    let elapsedMs = now.getTime() - productionDate.getTime();
    let elapsedDays = Math.ceil(elapsedMs / (1000*60*60*24));
    if (elapsedDays < 0) {
      elapsedDays = 0; // если дата покупки в будущем
    }

    // Сколько осталось?
    let daysRemaining = totalWarrantyDays - elapsedDays;
    if (daysRemaining < 0) {
      daysRemaining = 0; // гарантия закончилась
    }

    // Процент заливки (0..100%)
    let percent = (elapsedDays / totalWarrantyDays) * 100;
    if (percent > 100) {
      percent = 100;
    }

    // Устанавливаем ширину прогресс-бара
    const barWidthPx = 342; // ширина .progress-background по макету
    const fillWidth = (barWidthPx * percent) / 100;
    progressFillEl.style.width = fillWidth + 'px';

    // Если гарантия истекла -> «Гарантия истекла»
    // И заливаем бар на 100% (уже сделано выше, percent=100)
    if (daysRemaining === 0 && now > warrantyEnd) {
      daysRemainingEl.textContent = "Гарантия истекла";
    } else {
      daysRemainingEl.textContent = `Осталось ${daysRemaining} дней гарантии`;
    }
  </script>
</body>
</html>